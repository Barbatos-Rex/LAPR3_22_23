CREATE OR REPLACE TRIGGER trgCreateMeteorologicStation
    BEFORE INSERT
    ON SECTOR
    FOR EACH ROW
    WHEN ( new.METEOROLOGICSTATION is NULL )
DECLARE
    stationId SECTOR.METEOROLOGICSTATION%type;
BEGIN
    INSERT INTO METEOROLOGICSTATION(NAME) VALUES ('Station');
    SELECT ID into stationId FROM METEOROLOGICSTATION ORDER BY ID DESC FETCH FIRST ROW ONLY;
    :new.METEOROLOGICSTATION := stationId;
end;

CREATE OR REPLACE TRIGGER trgCreateFieldRecording
    AFTER INSERT
    ON EXPLORATION
    FOR EACH ROW
BEGIN
    INSERT INTO FIELDRECORDING VALUES (:old.ID);
end;

CREATE OR REPLACE TRIGGER trgFindFieldRecording
    BEFORE INSERT
    ON HARVEST
    FOR EACH ROW WHEN ( new.FIELDRECORDING IS NULL )

BEGIN
    SELECT EXPLORATION into :new.FIELDRECORDING FROM SECTOR WHERE ID=:new.SECTOR;
end;